<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve metric data for a specific area and for national (England) comparison — cvd_indicator_nationalarea_metric_data • cvdprevent</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve metric data for a specific area and for national (England) comparison — cvd_indicator_nationalarea_metric_data"><meta name="description" content="Returns a named list of tibbles containing: (1) metric data for the specified NHS area and the national (England, AreaID = 1) aggregate, and (2) details achieving the target value (if defined), including the target percentage and the additional number of patients needed to reach the target. This function supports benchmarking local performance vs. the national average, and helps quantify gaps to clinical targets.
If there is no data for either national or the chosen area for the given parameters, an error tibble is returned."><meta property="og:description" content="Returns a named list of tibbles containing: (1) metric data for the specified NHS area and the national (England, AreaID = 1) aggregate, and (2) details achieving the target value (if defined), including the target percentage and the additional number of patients needed to reach the target. This function supports benchmarking local performance vs. the national average, and helps quantify gaps to clinical targets.
If there is no data for either national or the chosen area for the given parameters, an error tibble is returned."><meta property="og:image" content="https://craig-parylo.github.io/cvdprevent/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cvdprevent</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/using_cvdprevent.html">Using CVD Prevent</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/craig-parylo/cvdprevent/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve metric data for a specific area and for national (England) comparison</h1>
      <small class="dont-index">Source: <a href="https://github.com/craig-parylo/cvdprevent/blob/v0.2.3/R/cvd_api_functions.R" class="external-link"><code>R/cvd_api_functions.R</code></a></small>
      <div class="d-none name"><code>cvd_indicator_nationalarea_metric_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns a named list of tibbles containing: (1) metric data for the specified NHS area and the national (England, AreaID = 1) aggregate, and (2) details achieving the target value (if defined), including the target percentage and the additional number of patients needed to reach the target. This function supports benchmarking local performance vs. the national average, and helps quantify gaps to clinical targets.</p>
<p>If there is no data for either national or the chosen area for the given parameters, an error tibble is returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cvd_indicator_nationalarea_metric_data</span><span class="op">(</span><span class="va">time_period_id</span>, <span class="va">area_id</span>, <span class="va">metric_id</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-time-period-id">time_period_id<a class="anchor" aria-label="anchor" href="#arg-time-period-id"></a></dt>
<dd><p>Integer (required). The reporting period (time period) for which to retrieve metric data. Use <code><a href="cvd_time_period_list.html">cvd_time_period_list()</a></code> to find valid IDs.</p></dd>


<dt id="arg-area-id">area_id<a class="anchor" aria-label="anchor" href="#arg-area-id"></a></dt>
<dd><p>Integer (required). The AreaID for which to retrieve data in addition to the national aggregate. use <code><a href="cvd_area_list.html">cvd_area_list()</a></code> or <code><a href="cvd_area_search.html">cvd_area_search()</a></code> to find valid IDs.</p></dd>


<dt id="arg-metric-id">metric_id<a class="anchor" aria-label="anchor" href="#arg-metric-id"></a></dt>
<dd><p>Integer (required). The MetricID for which to retrieve values. Use <code><a href="cvd_indicator_metric_list.html">cvd_indicator_metric_list()</a></code> or <code><a href="cvd_indicator_data.html">cvd_indicator_data()</a></code> to find valid MetricIDs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list with up to two tibbles:</p><dl><dt>area</dt>
<dd><p>Tibble with one or more rows, summarising the metric for the specified area and the England aggregate (AreaID = 1).</p></dd>

<dt>target</dt>
<dd><p>Tibble (if available) with target-setting details for the area</p></dd>


</dl><p>If no data exists for both the area and the national aggregate for the given parameters, returns a tibble describing the error.</p>
<p><strong>area</strong> contains the following columns:</p><dl><dt>AreaCode</dt>
<dd><p>Character. Code for the NHS area (e.g., "U68943" for Chester South PCN, "E92000001" for England).</p></dd>

<dt>AreaID</dt>
<dd><p>Integer. Unique identifier for the NHS area.</p></dd>

<dt>AreaName</dt>
<dd><p>Character. Name of the NHS area (e.g., "Chester South PCN", "England").</p></dd>

<dt>HighestPriorityNotificationType</dt>
<dd><p>Character. Notification priority level, if applicable (e.g., "Red"). Often blank.</p></dd>

<dt>NationalLevel</dt>
<dd><p>Character. Indicates whether the area represents national-level data ("Y" or "N").</p></dd>

<dt>NotificationCount</dt>
<dd><p>Integer. Count of notifications associated with the area for the given metric.</p></dd>

<dt>Value</dt>
<dd><p>Numeric. Final calculated value for the metric in the specified area.</p></dd>


</dl><p><strong>target</strong> contains the following columns:</p><dl><dt>TargetLabel</dt>
<dd><p>Character. Descriptive label for the target (e.g., "Upper threshold for QOF").</p></dd>

<dt>TargetPatients</dt>
<dd><p>Integer. Number of additional patients needed to achieve the target threshold.</p></dd>

<dt>TargetValue</dt>
<dd><p>Numeric. Target value or threshold to be achieved (e.g., 95).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Use this function to benchmark a local area's metric value against the national figure and to understand the actual gap to a clinically meaningful target.</p>
    </div>
    <div class="section level2">
    <h2 id="api-documentation">API Documentation<a class="anchor" aria-label="anchor" href="#api-documentation"></a></h2>


<p>See the <a href="https://bmchealthdocs.atlassian.net/wiki/spaces/CP/pages/317882369/CVDPREVENT+API+Documentation#%2Findicator%2FnationalAreaMetricData" class="external-link">CVDPREVENT API documentation: Indicator national area metric data</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="cvd_indicator_list.html">cvd_indicator_list()</a></code>, <code><a href="cvd_indicator_metric_list.html">cvd_indicator_metric_list()</a></code>, <code><a href="cvd_indicator_metric_data.html">cvd_indicator_metric_data()</a></code>, <code><a href="cvd_indicator_data.html">cvd_indicator_data()</a></code>, <code><a href="cvd_indicator_raw_data.html">cvd_indicator_raw_data()</a></code>, <code><a href="cvd_area_list.html">cvd_area_list()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Compare performance against metric 150  (AF: treatment with anticoagulants</span></span></span>
<span class="r-in"><span><span class="co"># - all people) in 'Chester South PCN' (area ID 553) with national</span></span></span>
<span class="r-in"><span><span class="co"># performance:</span></span></span>
<span class="r-in"><span><span class="va">returned_list</span> <span class="op">&lt;-</span> <span class="fu">cvd_indicator_nationalarea_metric_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>    metric_id <span class="op">=</span> <span class="fl">150</span>,</span></span>
<span class="r-in"><span>    time_period_id <span class="op">=</span> <span class="fl">17</span>,</span></span>
<span class="r-in"><span>    area_id <span class="op">=</span> <span class="fl">553</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See what the list contains</span></span></span>
<span class="r-in"><span><span class="va">returned_list</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Length Class  Mode</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> area   7      tbl_df list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> target 3      tbl_df list</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract the `area` details</span></span></span>
<span class="r-in"><span><span class="va">area_data</span> <span class="op">&lt;-</span> <span class="va">returned_list</span><span class="op">$</span><span class="va">area</span></span></span>
<span class="r-in"><span><span class="va">area_data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   AreaCode  AreaID AreaName          HighestPriorityNotification…¹ NationalLevel</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> E92000001      1 England           <span style="color: #BB0000;">NA</span>                            Y            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> U68943       553 Chester South PCN <span style="color: #BB0000;">NA</span>                            N            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated name: ¹​HighestPriorityNotificationType</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: NotificationCount &lt;int&gt;, Value &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract `target` details</span></span></span>
<span class="r-in"><span><span class="va">target_data</span> <span class="op">&lt;-</span> <span class="va">returned_list</span><span class="op">$</span><span class="va">target</span></span></span>
<span class="r-in"><span><span class="va">target_data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TargetLabel             TargetPatients TargetValue</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Upper threshold for QOF             45          95</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Parylo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

